<!DOCTYPE html>
<html lang="fr">
<head>
    <!--
      Copyright (c) 2025 Tino Le Doc - Tous droits reserves
      Toute copie, reproduction ou reutilisation non autorisee est interdite.
      Licence proprietaire - voir fichier LICENSE
    -->
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="fr">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8612974241235499"
         crossorigin="anonymous"></script>
    <meta name="author" content="Tino Le Doc">
    <meta name="copyright" content="Copyright 2025 Tino Le Doc. Tous droits reserves.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Passez Premium sur Tino Le Doc et debloquez des fonctionnalites exclusives sur l'intelligence artificielle.">
    <meta property="og:title" content="Premium - Tino Le Doc">
    <meta property="og:description" content="Debloquez des fonctionnalites exclusives sur l'intelligence artificielle.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tino-le-doc.com/premium.html">
    <meta property="og:locale" content="fr_FR">
    <title>Premium ‚ú® Tino Le Doc</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Syne:wght@700;800&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="stylesheet" href="css/common.css">
    <style>
        :root {
            --bg: #0a0a0f;
            --cyan: #00f5ff;
            --magenta: #ff00aa;
            --yellow: #f5ff00;
            --orange: #ff9500;
            --green: #00ff88;
            --red: #ff4444;
            --gold: #ffd700;
            --text: #e8e8e8;
            --text-secondary: #a0a0a0;
            --glass: rgba(255,255,255,0.05);
            --glass-border: rgba(255,255,255,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Space Grotesk', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; }
        .bg-grid { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(rgba(255, 215, 0, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 215, 0, 0.03) 1px, transparent 1px); background-size: 50px 50px; pointer-events: none; z-index: 0; }
        .container { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; padding: 40px 20px; }
        .logo { margin-bottom: 20px; }
        .logo img { max-width: 120px; filter: drop-shadow(0 5px 20px rgba(255,215,0,0.4)); }
        .back-link { display: inline-block; color: var(--cyan); text-decoration: none; margin-bottom: 20px; }
        h1 { font-family: 'Syne', sans-serif; font-size: 3rem; background: linear-gradient(135deg, var(--gold), var(--orange)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 15px; }
        .subtitle { font-size: 1.2rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        .premium-badge { display: inline-flex; align-items: center; gap: 8px; padding: 10px 25px; background: linear-gradient(135deg, var(--gold), var(--orange)); border-radius: 30px; font-family: 'Syne', sans-serif; font-weight: 700; color: var(--bg); margin: 20px 0; animation: glow 2s ease-in-out infinite; }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.4); } 50% { box-shadow: 0 0 40px rgba(255,215,0,0.6); } }
        
        .config-box { background: rgba(255,68,68,0.1); border: 2px solid var(--red); border-radius: 15px; padding: 25px; margin-bottom: 30px; display: none; }
        .config-box.success { background: rgba(0,255,136,0.1); border-color: var(--green); }
        .config-title { font-family: 'Syne', sans-serif; font-size: 1.2rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .config-input { width: 100%; padding: 12px 15px; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text); font-family: inherit; font-size: 0.9rem; margin-bottom: 10px; }
        .config-input:focus { outline: none; border-color: var(--cyan); }
        .config-btn { padding: 10px 20px; background: var(--green); border: none; border-radius: 8px; color: var(--bg); font-weight: 700; cursor: pointer; }
        .config-note { font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px; }

        .pricing-section { padding: 40px 0; }
        .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1000px; margin: 0 auto; }
        .pricing-card { background: var(--glass); border: 2px solid var(--glass-border); border-radius: 25px; padding: 40px 30px; text-align: center; position: relative; transition: all 0.3s; }
        .pricing-card:hover { transform: translateY(-10px); border-color: var(--cyan); }
        .pricing-card.popular { border-color: var(--gold); background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,149,0,0.1)); }
        .pricing-card.popular::before { content: '‚≠ê POPULAIRE'; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, var(--gold), var(--orange)); color: var(--bg); padding: 8px 20px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; }
        .plan-icon { font-size: 3rem; margin-bottom: 15px; }
        .plan-name { font-family: 'Syne', sans-serif; font-size: 1.5rem; margin-bottom: 10px; }
        .plan-price { font-family: 'Syne', sans-serif; font-size: 3rem; font-weight: 800; background: linear-gradient(135deg, var(--cyan), var(--magenta)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .plan-price span { font-size: 1rem; color: var(--text-secondary); -webkit-text-fill-color: var(--text-secondary); }
        .plan-period { color: var(--text-secondary); margin-bottom: 25px; }
        .plan-features { list-style: none; margin-bottom: 30px; text-align: left; }
        .plan-features li { padding: 10px 0; border-bottom: 1px solid var(--glass-border); display: flex; align-items: center; gap: 10px; }
        .plan-features li:last-child { border-bottom: none; }
        .plan-features .check { color: var(--green); font-size: 1.2rem; }
        .plan-features .cross { color: var(--red); font-size: 1.2rem; opacity: 0.5; }
        .plan-btn { width: 100%; padding: 15px 30px; border: none; border-radius: 15px; font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s; }
        .plan-btn.primary { background: linear-gradient(135deg, var(--gold), var(--orange)); color: var(--bg); }
        .plan-btn.secondary { background: var(--glass); border: 2px solid var(--cyan); color: var(--cyan); }
        .plan-btn:hover { transform: scale(1.05); box-shadow: 0 10px 30px rgba(255,215,0,0.3); }
        .plan-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .user-status { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 15px; padding: 20px; margin-bottom: 30px; display: none; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 15px; }
        .user-status.active { display: flex; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 50px; height: 50px; background: linear-gradient(135deg, var(--magenta), var(--cyan)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.2rem; }
        .user-name { font-family: 'Syne', sans-serif; font-size: 1.1rem; }
        .user-plan { font-size: 0.9rem; color: var(--text-secondary); }
        .user-plan.premium { color: var(--gold); }

        .already-premium { background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,149,0,0.2)); border: 2px solid var(--gold); border-radius: 20px; padding: 40px; text-align: center; margin-bottom: 30px; display: none; }
        .already-premium.active { display: block; }
        .already-premium h2 { font-family: 'Syne', sans-serif; font-size: 1.8rem; color: var(--gold); margin-bottom: 15px; }
        .already-premium p { color: var(--text-secondary); margin-bottom: 20px; }
        .premium-expires { font-size: 0.9rem; color: var(--text-secondary); }

        .features-section { padding: 60px 0; }
        .section-title { font-family: 'Syne', sans-serif; font-size: 2rem; text-align: center; margin-bottom: 40px; background: linear-gradient(135deg, var(--cyan), var(--magenta)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }
        .feature-card { background: var(--glass); border: 1px solid var(--glass-border); border-radius: 20px; padding: 30px; text-align: center; transition: all 0.3s; }
        .feature-card:hover { border-color: var(--gold); transform: translateY(-5px); }
        .feature-icon { font-size: 2.5rem; margin-bottom: 15px; }
        .feature-title { font-family: 'Syne', sans-serif; font-size: 1.2rem; margin-bottom: 10px; color: var(--gold); }
        .feature-desc { color: var(--text-secondary); line-height: 1.6; }

        footer { text-align: center; padding: 40px 20px; color: var(--text-secondary); }
        footer a { color: var(--cyan); text-decoration: none; }
        .footer-links { display: flex; justify-content: center; gap: 25px; margin-top: 15px; flex-wrap: wrap; }
        @media (max-width: 768px) { h1 { font-size: 2rem; } .pricing-grid { grid-template-columns: 1fr; } }
        .toast { position: fixed; bottom: 20px; right: 20px; padding: 15px 25px; background: var(--green); color: var(--bg); border-radius: 10px; font-weight: 700; transform: translateX(150%); transition: transform 0.3s; z-index: 1000; }
        .toast.show { transform: translateX(0); }
        .toast.error { background: var(--red); color: white; }
        .stripe-badge { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 30px; padding: 15px; background: var(--glass); border-radius: 10px; font-size: 0.9rem; color: var(--text-secondary); }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Aller au contenu</a>
    <nav class="nav-dropdown" aria-label="Navigation rapide">
        <select onchange="if(this.value) window.location.href=this.value" aria-label="Naviguer vers une page">
            <option value="">&#9776; Menu</option>
            <option value="index.html">&#127968; Accueil</option>
            <option value="veille-techno.html">&#128225; Veille Techno</option>
            <option value="quiz.html">&#129504; Quiz</option>
            <option value="sondages.html">&#128202; Sondages</option>
            <option value="debat.html">&#9876;&#65039; D&eacute;bat</option>
            <option value="tchat.html">&#128172; Tchat</option>
            <option value="messagerie.html">&#9993;&#65039; Messagerie</option>
            <option value="avis.html">&#11088; Avis</option>
            <option value="compte.html">&#128100; Compte</option>
            <option value="premium.html" selected>&#128081; Premium</option>
            <option value="boutique.html">&#128722; Boutique</option>
            <option value="contact.html">&#128231; Contact</option>
            <option value="confidentialite.html">&#128274; Confidentialit&eacute;</option>
        </select>
    </nav>
    <div class="bg-grid"></div>
    <div class="container">
        <header id="main-content" class="header">
            <div class="logo"><a href="index.html"><img src="img/1000074494.png" alt="Tino Le Doc"></a></div>
            <a href="index.html" class="back-link">‚Üê Retour √† l'accueil</a>
            <h1>‚ú® Tino Premium</h1>
            <p class="subtitle">D√©bloquez tout le potentiel de Tino Le Doc et acc√©dez √† des contenus exclusifs sur l'IA</p>
            <div class="premium-badge"><span>üëë</span><span>OFFRE DE LANCEMENT -30%</span></div>
        </header>

        <!-- Config Stripe -->
        <div class="config-box" id="configBox">
            <div class="config-title">‚öôÔ∏è Configuration Stripe (Admin)</div>
            <input type="text" class="config-input" id="stripeKeyInput" placeholder="Cl√© publique Stripe (pk_test_... ou pk_live_...)">
            <input type="text" class="config-input" id="priceMonthlyInput" placeholder="Price ID Mensuel (price_...)">
            <input type="text" class="config-input" id="priceYearlyInput" placeholder="Price ID Annuel (price_...)">
            <button class="config-btn" onclick="saveConfig()">üíæ Sauvegarder</button>
            <p class="config-note">‚ö†Ô∏è Ces cl√©s sont sauvegard√©es localement. Pour la production, utilisez un backend s√©curis√©.</p>
        </div>

        <!-- User Status -->
        <div class="user-status" id="userStatus">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">?</div>
                <div>
                    <div class="user-name" id="userName">Utilisateur</div>
                    <div class="user-plan" id="userPlan">Plan Gratuit</div>
                </div>
            </div>
            <div>
                <a href="compte.html" class="plan-btn secondary" style="width:auto;padding:10px 20px;display:inline-block;text-decoration:none;">‚öôÔ∏è Mon compte</a>
                <button class="plan-btn secondary" style="width:auto;padding:10px 20px;margin-left:10px;" onclick="toggleConfig()">üîß</button>
            </div>
        </div>

        <!-- Already Premium -->
        <div class="already-premium" id="alreadyPremium">
            <h2>üëë Vous √™tes Premium !</h2>
            <p>Merci pour votre soutien ! Vous avez acc√®s √† toutes les fonctionnalit√©s exclusives.</p>
            <div class="premium-expires" id="premiumExpires"></div>
            <a href="boutique.html" class="plan-btn primary" style="display:inline-block;margin-top:20px;text-decoration:none;">üõí Voir la boutique</a>
        </div>

        <!-- Pricing -->
        <section class="pricing-section" id="pricingSection">
            <div class="pricing-grid">
                <div class="pricing-card">
                    <div class="plan-icon">üÜì</div>
                    <h3 class="plan-name">Gratuit</h3>
                    <div class="plan-price">0‚Ç¨</div>
                    <div class="plan-period">Pour toujours</div>
                    <ul class="plan-features">
                        <li><span class="check">‚úì</span> Quiz IA (3/jour)</li>
                        <li><span class="check">‚úì</span> Sondages (3 votes/jour)</li>
                        <li><span class="check">‚úì</span> D√©bat du jour</li>
                        <li><span class="check">‚úì</span> Tchat public</li>
                        <li><span class="cross">‚úó</span> Messages priv√©s limit√©s</li>
                        <li><span class="cross">‚úó</span> Publicit√©s affich√©es</li>
                    </ul>
                    <button class="plan-btn secondary" onclick="location.href='compte.html'">Commencer gratuitement</button>
                </div>
                <div class="pricing-card popular">
                    <div class="plan-icon">‚ö°</div>
                    <h3 class="plan-name">Premium Mensuel</h3>
                    <div class="plan-price">4,99‚Ç¨<span>/mois</span></div>
                    <div class="plan-period"><s>6,99‚Ç¨</s> Offre lancement</div>
                    <ul class="plan-features">
                        <li><span class="check">‚úì</span> Quiz illimit√©s</li>
                        <li><span class="check">‚úì</span> Votes illimit√©s</li>
                        <li><span class="check">‚úì</span> Cr√©er vos d√©bats</li>
                        <li><span class="check">‚úì</span> Messages priv√©s illimit√©s</li>
                        <li><span class="check">‚úì</span> <strong>Sans publicit√©</strong></li>
                        <li><span class="check">‚úì</span> Badge Premium ‚ú®</li>
                    </ul>
                    <button class="plan-btn primary" id="btnMonthly" onclick="subscribe('monthly')">S'abonner maintenant</button>
                </div>
                <div class="pricing-card">
                    <div class="plan-icon">üíé</div>
                    <h3 class="plan-name">Premium Annuel</h3>
                    <div class="plan-price">39,99‚Ç¨<span>/an</span></div>
                    <div class="plan-period"><s>59,88‚Ç¨</s> √âconomisez 33%</div>
                    <ul class="plan-features">
                        <li><span class="check">‚úì</span> Tout le plan mensuel</li>
                        <li><span class="check">‚úì</span> <strong>2 mois gratuits</strong></li>
                        <li><span class="check">‚úì</span> Pack Prompts IA offert</li>
                        <li><span class="check">‚úì</span> Acc√®s anticip√© nouveaut√©s</li>
                        <li><span class="check">‚úì</span> Support prioritaire</li>
                        <li><span class="check">‚úì</span> Badge VIP üíé</li>
                    </ul>
                    <button class="plan-btn primary" id="btnYearly" onclick="subscribe('yearly')">Meilleure offre</button>
                </div>
            </div>
            <div class="stripe-badge">üîí Paiement 100% s√©curis√© par <strong style="margin-left:5px;">Stripe</strong></div>
        </section>

        <!-- Features -->
        <section class="features-section">
            <h2 class="section-title">üöÄ Avantages Premium</h2>
            <div class="features-grid">
                <div class="feature-card"><div class="feature-icon">üß†</div><h3 class="feature-title">Quiz Illimit√©s</h3><p class="feature-desc">Testez vos connaissances sur l'IA sans limite.</p></div>
                <div class="feature-card"><div class="feature-icon">üìö</div><h3 class="feature-title">Ressources Exclusives</h3><p class="feature-desc">E-books, guides et formations IA.</p></div>
                <div class="feature-card"><div class="feature-icon">üí¨</div><h3 class="feature-title">Messagerie Priv√©e</h3><p class="feature-desc">√âchangez sans limite avec la communaut√©.</p></div>
                <div class="feature-card"><div class="feature-icon">üö´</div><h3 class="feature-title">Sans Publicit√©</h3><p class="feature-desc">Une exp√©rience pure et sans distraction.</p></div>
                <div class="feature-card"><div class="feature-icon">‚öîÔ∏è</div><h3 class="feature-title">Cr√©ez vos D√©bats</h3><p class="feature-desc">Proposez vos propres sujets.</p></div>
                <div class="feature-card"><div class="feature-icon">‚ú®</div><h3 class="feature-title">Badge Premium</h3><p class="feature-desc">Affichez votre statut VIP.</p></div>
            </div>
        </section>

        <footer role="contentinfo">
            <p><strong>Tino Le Doc</strong> - L'IA qui fait d√©bat</p>
            <div class="footer-links">
                <a href="index.html">üè† Accueil</a>
                <a href="boutique.html">üõí Boutique</a>
                <a href="compte.html">üë§ Mon compte</a>
                <a href="contact.html">üìß Contact</a>
                <a href="confidentialite.html">üîí Confidentialit√©</a>
                <a href="veille-techno.html">üì° Veille Techno</a>
            </div>
        </footer>
    </div>

    <div class="toast" id="toast"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>

    <script>
    // ==================== CONFIG ====================
    // REMPLACE CES VALEURS PAR TES CL√âS STRIPE
    const DEFAULT_CONFIG = {
        stripeKey: '', // pk_test_xxx ou pk_live_xxx
        priceMonthly: '', // price_xxx
        priceYearly: ''   // price_xxx
    };

    // Config Firebase chargee depuis js/firebase-config.js
    const auth = firebaseAuth;
    const db = firebaseDb;

    let stripe = null;
    let stripeConfig = { ...DEFAULT_CONFIG };
    let currentUser = null;
    let userProfile = null;

    // Load config
    function loadConfig() {
        try {
            const saved = localStorage.getItem('tinoStripeConfig');
            if (saved) stripeConfig = JSON.parse(saved);
        } catch (e) {}
        
        if (stripeConfig.stripeKey && stripeConfig.stripeKey.startsWith('pk_')) {
            try {
                stripe = Stripe(stripeConfig.stripeKey);
                console.log('‚úÖ Stripe initialis√©');
            } catch (e) {
                console.error('‚ùå Erreur Stripe:', e);
            }
        }
    }

    function toggleConfig() {
        const box = document.getElementById('configBox');
        box.style.display = box.style.display === 'none' ? 'block' : 'none';
        document.getElementById('stripeKeyInput').value = stripeConfig.stripeKey || '';
        document.getElementById('priceMonthlyInput').value = stripeConfig.priceMonthly || '';
        document.getElementById('priceYearlyInput').value = stripeConfig.priceYearly || '';
    }

    function saveConfig() {
        const key = document.getElementById('stripeKeyInput').value.trim();
        const monthly = document.getElementById('priceMonthlyInput').value.trim();
        const yearly = document.getElementById('priceYearlyInput').value.trim();

        if (key && !key.startsWith('pk_')) {
            showToast('Cl√© Stripe invalide', true);
            return;
        }

        stripeConfig = { stripeKey: key, priceMonthly: monthly, priceYearly: yearly };
        localStorage.setItem('tinoStripeConfig', JSON.stringify(stripeConfig));

        if (key) {
            try {
                stripe = Stripe(key);
                showToast('‚úÖ Configuration sauvegard√©e !');
                document.getElementById('configBox').classList.add('success');
            } catch (e) {
                showToast('Erreur Stripe', true);
            }
        } else {
            showToast('‚úÖ Configuration sauvegard√©e (mode d√©mo)');
        }
    }

    // Auth
    auth.onAuthStateChanged(async (user) => {
        currentUser = user;
        const statusEl = document.getElementById('userStatus');
        const premiumEl = document.getElementById('alreadyPremium');
        const pricingEl = document.getElementById('pricingSection');

        if (user) {
            statusEl.classList.add('active');
            try {
                const snapshot = await db.ref('users/' + user.uid).once('value');
                userProfile = snapshot.val() || {};
                document.getElementById('userAvatar').textContent = userProfile.pseudo ? userProfile.pseudo.charAt(0).toUpperCase() : '?';
                document.getElementById('userName').textContent = userProfile.pseudo || 'Utilisateur';

                if (userProfile.premium && userProfile.premiumExpiry > Date.now()) {
                    document.getElementById('userPlan').textContent = '‚ú® Premium';
                    document.getElementById('userPlan').classList.add('premium');
                    premiumEl.classList.add('active');
                    pricingEl.style.display = 'none';
                    document.getElementById('premiumExpires').textContent = 'Expire le ' + new Date(userProfile.premiumExpiry).toLocaleDateString('fr-FR');
                } else {
                    document.getElementById('userPlan').textContent = 'Plan Gratuit';
                }
            } catch (e) { console.error(e); }
        }
        setTimeout(checkUrlParams, 500);
    });

    // Subscribe
    async function subscribe(plan) {
        if (!currentUser) {
            showToast('Connectez-vous d\'abord', true);
            setTimeout(() => location.href = 'compte.html', 1500);
            return;
        }

        const priceId = plan === 'monthly' ? stripeConfig.priceMonthly : stripeConfig.priceYearly;
        const btn = document.getElementById(plan === 'monthly' ? 'btnMonthly' : 'btnYearly');

        if (!stripe || !priceId || !priceId.startsWith('price_')) {
            // Mode simulation
            if (confirm('‚ö†Ô∏è Mode D√©mo\n\nStripe non configur√©. Simuler le paiement ?')) {
                await simulatePayment(plan);
            }
            return;
        }

        btn.disabled = true;
        btn.textContent = '‚è≥ Redirection...';

        try {
            const { error } = await stripe.redirectToCheckout({
                lineItems: [{ price: priceId, quantity: 1 }],
                mode: 'subscription',
                successUrl: window.location.href.split('?')[0] + '?success=true&plan=' + plan,
                cancelUrl: window.location.href.split('?')[0] + '?canceled=true',
                customerEmail: currentUser.email,
                clientReferenceId: currentUser.uid
            });
            if (error) showToast(error.message, true);
        } catch (e) {
            showToast('Erreur Stripe', true);
        }
        btn.disabled = false;
        btn.textContent = plan === 'monthly' ? 'S\'abonner maintenant' : 'Meilleure offre';
    }

    async function simulatePayment(plan) {
        try {
            await db.ref('users/' + currentUser.uid).update({
                premium: true,
                premiumType: plan,
                premiumStart: Date.now(),
                premiumExpiry: plan === 'yearly' ? Date.now() + 365*24*60*60*1000 : Date.now() + 30*24*60*60*1000
            });
            showToast('üéâ Bienvenue Premium !');
            setTimeout(() => location.reload(), 2000);
        } catch (e) {
            showToast('Erreur', true);
        }
    }

    function checkUrlParams() {
        const params = new URLSearchParams(window.location.search);
        if (params.get('success') === 'true' && currentUser) {
            const plan = params.get('plan') || 'monthly';
            db.ref('users/' + currentUser.uid).update({
                premium: true,
                premiumType: plan,
                premiumStart: Date.now(),
                premiumExpiry: plan === 'yearly' ? Date.now() + 365*24*60*60*1000 : Date.now() + 30*24*60*60*1000
            }).then(() => {
                showToast('üéâ Paiement r√©ussi !');
                window.history.replaceState({}, '', window.location.pathname);
                setTimeout(() => location.reload(), 2000);
            });
        }
        if (params.get('canceled') === 'true') {
            showToast('Paiement annul√©', true);
            window.history.replaceState({}, '', window.location.pathname);
        }
    }

    // showToast() charge depuis js/firebase-config.js

    loadConfig();
    </script>
</body>
</html>
