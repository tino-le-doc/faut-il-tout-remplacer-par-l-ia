<!DOCTYPE html>
<html lang="fr">
<head>
    <!--
      Copyright (c) 2025 Tino Le Doc - Tous droits reserves
      Toute copie, reproduction ou reutilisation non autorisee est interdite.
      Licence proprietaire - voir fichier LICENSE
    -->
    <meta charset="UTF-8">
    <meta http-equiv="content-language" content="fr">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8612974241235499"
         crossorigin="anonymous"></script>
    <meta name="author" content="Tino Le Doc">
    <meta name="copyright" content="Copyright 2025 Tino Le Doc. Tous droits reserves.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="img/1000074494.png">
    <link rel="manifest" href="manifest.json">
    <meta name="description" content="Appareils connectes et IA - Decouvrez comment l'intelligence artificielle transforme nos objets du quotidien. Assistant IA, comparateur et conseils.">
    <meta property="og:title" content="Appareils Connectes &amp; IA - Tino Le Doc">
    <meta property="og:description" content="L'IA dans vos appareils connectes : assistant intelligent, comparateur, conseils et debats sur l'IoT.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tino-le-doc.com/appareils-connectes.html">
    <meta property="og:locale" content="fr_FR">
    <title>Appareils Connectes &amp; IA - Tino Le Doc</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <style>
        .grecaptcha-badge { visibility: hidden; }

        .page-title {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 800;
            text-align: center;
            margin: 30px 0 10px;
            background: linear-gradient(135deg, var(--cyan) 0%, var(--green) 50%, var(--yellow) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeInUp 0.8s ease-out;
        }

        .page-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 40px;
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }

        /* ========== Device Categories ========== */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
            animation: fadeInUp 0.8s ease-out 0.4s backwards;
        }

        .device-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px 25px;
            text-align: center;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .device-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--cyan), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .device-card:hover::before {
            opacity: 1;
        }

        .device-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 245, 255, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(0, 245, 255, 0.08);
        }

        .device-card.active {
            border-color: var(--cyan);
            box-shadow: 0 0 30px rgba(0, 245, 255, 0.15);
        }

        .device-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .device-name {
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 1.15rem;
            color: var(--text);
            margin-bottom: 8px;
        }

        .device-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .device-ai-badge {
            display: inline-block;
            margin-top: 12px;
            padding: 4px 12px;
            background: rgba(0, 255, 136, 0.12);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--green);
            font-weight: 700;
        }

        /* ========== AI Chat Assistant ========== */
        .ai-section {
            max-width: 800px;
            margin: 0 auto 50px;
            animation: fadeInUp 0.8s ease-out 0.6s backwards;
        }

        .section-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--magenta), var(--cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 25px;
        }

        .ai-chat-container {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .ai-chat-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 18px 25px;
            background: rgba(0, 245, 255, 0.05);
            border-bottom: 1px solid var(--glass-border);
        }

        .ai-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--cyan), var(--magenta));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .ai-header-info h3 {
            font-family: 'Syne', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--text);
        }

        .ai-header-info p {
            font-size: 0.8rem;
            color: var(--green);
        }

        .ai-status-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            animation: pulse 2s ease-in-out infinite;
        }

        .ai-chat-messages {
            padding: 20px;
            max-height: 420px;
            min-height: 200px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            scroll-behavior: smooth;
        }

        .ai-chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .ai-chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .ai-chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .chat-msg {
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 18px;
            font-size: 0.92rem;
            line-height: 1.6;
            animation: slideIn 0.3s ease-out;
        }

        .chat-msg.ai {
            align-self: flex-start;
            background: rgba(0, 245, 255, 0.08);
            border: 1px solid rgba(0, 245, 255, 0.15);
            border-bottom-left-radius: 4px;
            color: var(--text);
        }

        .chat-msg.user {
            align-self: flex-end;
            background: linear-gradient(135deg, rgba(255, 0, 170, 0.2), rgba(0, 245, 255, 0.15));
            border: 1px solid rgba(255, 0, 170, 0.2);
            border-bottom-right-radius: 4px;
            color: var(--text);
        }

        .chat-msg .msg-label {
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 0.75rem;
            margin-bottom: 5px;
            display: block;
        }

        .chat-msg.ai .msg-label { color: var(--cyan); }
        .chat-msg.user .msg-label { color: var(--magenta); }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 10px;
            align-self: flex-start;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            background: var(--cyan);
            border-radius: 50%;
            animation: typingBounce 1.4s ease-in-out infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-8px); opacity: 1; }
        }

        .ai-chat-input {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            border-top: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
        }

        .ai-chat-input input {
            flex: 1;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 14px;
            color: var(--text);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.95rem;
            outline: none;
            transition: all 0.3s;
        }

        .ai-chat-input input:focus {
            border-color: var(--cyan);
            box-shadow: 0 0 15px rgba(0, 245, 255, 0.1);
        }

        .ai-chat-input input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        .ai-chat-input button {
            padding: 14px 22px;
            background: linear-gradient(135deg, var(--cyan), var(--magenta));
            border: none;
            border-radius: 14px;
            color: white;
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .ai-chat-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 245, 255, 0.3);
        }

        .ai-chat-input button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Quick questions */
        .quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 0 20px 15px;
        }

        .quick-q {
            padding: 8px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Space Grotesk', sans-serif;
        }

        .quick-q:hover {
            border-color: var(--cyan);
            color: var(--cyan);
            background: rgba(0, 245, 255, 0.05);
        }

        /* ========== Comparateur IA ========== */
        .comparator-section {
            max-width: 800px;
            margin: 0 auto 50px;
            animation: fadeInUp 0.8s ease-out 0.8s backwards;
        }

        .comparator-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 35px;
            backdrop-filter: blur(10px);
        }

        .comparator-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: end;
            margin-bottom: 20px;
        }

        .comparator-field label {
            display: block;
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--cyan);
            margin-bottom: 8px;
        }

        .comparator-field select {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: var(--text);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.95rem;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300f5ff' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
        }

        .comparator-field select:focus {
            border-color: var(--cyan);
            box-shadow: 0 0 15px rgba(0, 245, 255, 0.15);
        }

        .comparator-field select option {
            background: #1a1a25;
            color: var(--text);
        }

        .comparator-vs {
            font-family: 'Syne', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--magenta);
            text-align: center;
            padding-bottom: 10px;
        }

        .compare-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--green), var(--cyan));
            border: none;
            border-radius: 12px;
            color: #0a0a0f;
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .compare-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .compare-result {
            margin-top: 25px;
            padding: 25px;
            background: rgba(0, 245, 255, 0.05);
            border: 1px solid rgba(0, 245, 255, 0.15);
            border-radius: 16px;
            display: none;
        }

        .compare-result.visible {
            display: block;
            animation: fadeInUp 0.4s ease-out;
        }

        .compare-result h4 {
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            color: var(--cyan);
            margin-bottom: 12px;
            font-size: 1.05rem;
        }

        .compare-result p {
            color: var(--text);
            line-height: 1.7;
            font-size: 0.92rem;
        }

        .compare-result .score-bar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .score-bar-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            min-width: 100px;
        }

        .score-bar-track {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-out;
        }

        .score-bar-value {
            font-size: 0.85rem;
            font-weight: 700;
            min-width: 40px;
            text-align: right;
        }

        /* ========== Stats Section ========== */
        .stats-section {
            max-width: 800px;
            margin: 0 auto 50px;
            animation: fadeInUp 0.8s ease-out 1s backwards;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 18px;
            padding: 25px 20px;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            border-color: var(--cyan);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .stat-value {
            font-family: 'Syne', sans-serif;
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--cyan), var(--green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* ========== Conseil du jour ========== */
        .tip-section {
            max-width: 800px;
            margin: 0 auto 50px;
            animation: fadeInUp 0.8s ease-out 1.2s backwards;
        }

        .tip-card {
            background: linear-gradient(135deg, rgba(0, 245, 255, 0.08), rgba(255, 0, 170, 0.05));
            border: 1px solid rgba(0, 245, 255, 0.2);
            border-radius: 24px;
            padding: 35px;
            position: relative;
            overflow: hidden;
        }

        .tip-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(0, 245, 255, 0.08), transparent);
            pointer-events: none;
        }

        .tip-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .tip-badge {
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--cyan), var(--green));
            border-radius: 20px;
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            font-size: 0.8rem;
            color: #0a0a0f;
        }

        .tip-text {
            color: var(--text);
            line-height: 1.8;
            font-size: 0.95rem;
        }

        .tip-text strong {
            color: var(--cyan);
        }

        .tip-refresh {
            margin-top: 15px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text-secondary);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tip-refresh:hover {
            border-color: var(--cyan);
            color: var(--cyan);
        }

        /* ========== Responsive ========== */
        @media (max-width: 768px) {
            .categories-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 12px;
            }

            .device-card {
                padding: 20px 15px;
            }

            .device-icon {
                font-size: 2.2rem;
            }

            .device-name {
                font-size: 1rem;
            }

            .comparator-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .comparator-vs {
                padding: 0;
            }

            .comparator-card {
                padding: 25px 20px;
            }

            .ai-chat-input {
                padding: 12px 15px;
            }

            .ai-chat-input button {
                padding: 14px 16px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .categories-grid {
                grid-template-columns: 1fr 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            .stat-card {
                padding: 18px 12px;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Aller au contenu</a>
    <nav class="nav-dropdown" aria-label="Navigation rapide">
        <select onchange="if(this.value) window.location.href=this.value" aria-label="Naviguer vers une page">
            <option value="">&#9776; Menu</option>
            <option value="index.html">&#127968; Accueil</option>
            <option value="veille-techno.html">&#128225; Veille Techno</option>
            <option value="quiz.html">&#129504; Quiz</option>
            <option value="sondages.html">&#128202; Sondages</option>
            <option value="debat.html">&#9876;&#65039; D&eacute;bat</option>
            <option value="tchat.html">&#128172; Tchat</option>
            <option value="messagerie.html">&#9993;&#65039; Messagerie</option>
            <option value="avis.html">&#11088; Avis</option>
            <option value="compte.html">&#128100; Compte</option>
            <option value="premium.html">&#128081; Premium</option>
            <option value="boutique.html">&#128722; Boutique</option>
            <option value="appareils-connectes.html" selected>&#128225; Appareils IA</option>
            <option value="contact.html">&#128231; Contact</option>
            <option value="confidentialite.html">&#128274; Confidentialit&eacute;</option>
        </select>
    </nav>
    <div class="bg-grid"></div>
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>

    <div class="container">
        <!-- Logo -->
        <div class="logo">
            <a href="index.html">
                <img src="img/1000074494.png" alt="Tino Le Doc" class="logo-img">
            </a>
        </div>

        <a href="index.html" class="back-link">&larr; Retour a l'accueil</a>

        <h1 class="page-title" id="main-content">Appareils Connectes &amp; IA</h1>
        <p class="page-subtitle">L'intelligence artificielle transforme nos objets du quotidien. Explorez, comparez et posez vos questions.</p>

        <!-- ========== Device Categories ========== -->
        <div class="categories-grid">
            <div class="device-card" onclick="askAboutDevice('maison')">
                <span class="device-icon">üè†</span>
                <div class="device-name">Maison intelligente</div>
                <div class="device-desc">Enceintes, thermostats, eclairages, aspirateurs robots</div>
                <span class="device-ai-badge">IA integree</span>
            </div>
            <div class="device-card" onclick="askAboutDevice('sante')">
                <span class="device-icon">üíä</span>
                <div class="device-name">Sante connectee</div>
                <div class="device-desc">Montres, tensiometres, balances, oxym√®tres, trackers de sommeil</div>
                <span class="device-ai-badge">IA predictive</span>
            </div>
            <div class="device-card" onclick="askAboutDevice('securite')">
                <span class="device-icon">üîí</span>
                <div class="device-name">Securite &amp; Surveillance</div>
                <div class="device-desc">Cameras, serrures, alarmes, detecteurs intelligents</div>
                <span class="device-ai-badge">IA detection</span>
            </div>
            <div class="device-card" onclick="askAboutDevice('mobilite')">
                <span class="device-icon">üöó</span>
                <div class="device-name">Mobilite &amp; Transport</div>
                <div class="device-desc">Voitures connectees, trottinettes, GPS, dashcams</div>
                <span class="device-ai-badge">IA conduite</span>
            </div>
            <div class="device-card" onclick="askAboutDevice('wearable')">
                <span class="device-icon">‚åö</span>
                <div class="device-name">Wearables</div>
                <div class="device-desc">Montres, lunettes AR, ecouteurs, bagues connectees</div>
                <span class="device-ai-badge">IA embarquee</span>
            </div>
            <div class="device-card" onclick="askAboutDevice('cuisine')">
                <span class="device-icon">üç≥</span>
                <div class="device-name">Cuisine connectee</div>
                <div class="device-desc">Frigos, fours, robots culinaires, cafeti√®res intelligentes</div>
                <span class="device-ai-badge">IA recettes</span>
            </div>
        </div>

        <!-- ========== AI Chat Assistant ========== -->
        <div class="ai-section">
            <h2 class="section-title">Assistant IA - Objets Connectes</h2>
            <p class="section-subtitle">Posez vos questions sur les appareils connectes et l'IA</p>

            <div class="ai-chat-container">
                <div class="ai-chat-header">
                    <div class="ai-avatar">ü§ñ</div>
                    <div class="ai-header-info">
                        <h3>Tino Assistant IoT</h3>
                        <p><span class="ai-status-dot"></span> En ligne - Pret a vous aider</p>
                    </div>
                </div>

                <div class="ai-chat-messages" id="chatMessages">
                    <div class="chat-msg ai">
                        <span class="msg-label">ü§ñ Tino IA</span>
                        Salut ! Je suis l'assistant IA specialise en appareils connectes. Posez-moi vos questions sur la domotique, les wearables, la securite IoT, ou cliquez sur une categorie ci-dessus pour decouvrir un domaine !
                    </div>
                </div>

                <div class="quick-questions" id="quickQuestions">
                    <button class="quick-q" onclick="askQuick('Quel assistant vocal choisir en 2025 ?')">üé§ Quel assistant vocal choisir ?</button>
                    <button class="quick-q" onclick="askQuick('Les objets connectes sont-ils securises ?')">üîê Securite des objets connectes</button>
                    <button class="quick-q" onclick="askQuick('Comment demarrer une maison connectee ?')">üè† Demarrer en domotique</button>
                    <button class="quick-q" onclick="askQuick('Quels sont les risques de l IA dans nos appareils ?')">‚ö†Ô∏è Risques de l'IA</button>
                </div>

                <form class="ai-chat-input" id="chatForm" onsubmit="handleChat(event)">
                    <input type="text" id="chatInput" placeholder="Posez votre question sur les appareils connectes..." maxlength="300" autocomplete="off">
                    <button type="submit" id="chatSendBtn">Envoyer</button>
                </form>
            </div>
        </div>

        <!-- ========== Comparateur IA ========== -->
        <div class="comparator-section">
            <h2 class="section-title">Comparateur IA</h2>
            <p class="section-subtitle">L'IA analyse et compare deux appareils pour vous</p>

            <div class="comparator-card">
                <div class="comparator-grid">
                    <div class="comparator-field">
                        <label for="device1">Appareil 1</label>
                        <select id="device1">
                            <option value="">-- Choisir --</option>
                            <option value="alexa">Amazon Echo (Alexa)</option>
                            <option value="google_home">Google Nest Hub</option>
                            <option value="homepod">Apple HomePod</option>
                            <option value="apple_watch">Apple Watch</option>
                            <option value="galaxy_watch">Samsung Galaxy Watch</option>
                            <option value="ring">Ring Doorbell</option>
                            <option value="nest_cam">Google Nest Cam</option>
                            <option value="roomba">iRobot Roomba</option>
                            <option value="dyson">Dyson Purifier</option>
                            <option value="thermomix">Thermomix TM6</option>
                            <option value="tesla">Tesla (Autopilot)</option>
                            <option value="meta_quest">Meta Quest</option>
                        </select>
                    </div>
                    <div class="comparator-vs">VS</div>
                    <div class="comparator-field">
                        <label for="device2">Appareil 2</label>
                        <select id="device2">
                            <option value="">-- Choisir --</option>
                            <option value="alexa">Amazon Echo (Alexa)</option>
                            <option value="google_home">Google Nest Hub</option>
                            <option value="homepod">Apple HomePod</option>
                            <option value="apple_watch">Apple Watch</option>
                            <option value="galaxy_watch">Samsung Galaxy Watch</option>
                            <option value="ring">Ring Doorbell</option>
                            <option value="nest_cam">Google Nest Cam</option>
                            <option value="roomba">iRobot Roomba</option>
                            <option value="dyson">Dyson Purifier</option>
                            <option value="thermomix">Thermomix TM6</option>
                            <option value="tesla">Tesla (Autopilot)</option>
                            <option value="meta_quest">Meta Quest</option>
                        </select>
                    </div>
                </div>
                <button class="compare-btn" onclick="compareDevices()">ü§ñ Comparer avec l'IA</button>

                <div class="compare-result" id="compareResult"></div>
            </div>
        </div>

        <!-- ========== Stats ========== -->
        <div class="stats-section">
            <h2 class="section-title">L'IoT en chiffres</h2>
            <p class="section-subtitle">Les tendances mondiales des appareils connectes</p>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üåç</div>
                    <div class="stat-value" id="statDevices">75 Mds</div>
                    <div class="stat-label">Appareils IoT en 2025</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üè†</div>
                    <div class="stat-value">63%</div>
                    <div class="stat-label">Foyers equipes d'ici 2027</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ü§ñ</div>
                    <div class="stat-value">85%</div>
                    <div class="stat-label">Appareils avec IA d'ici 2028</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="statQuestions">0</div>
                    <div class="stat-label">Questions posees ici</div>
                </div>
            </div>
        </div>

        <!-- ========== Conseil du jour ========== -->
        <div class="tip-section">
            <h2 class="section-title">Conseil IA du jour</h2>
            <p class="section-subtitle">Un conseil genere par l'IA pour optimiser vos appareils</p>

            <div class="tip-card">
                <div class="tip-header">
                    <span class="tip-badge">üí° Conseil IA</span>
                </div>
                <div class="tip-text" id="tipText">Chargement...</div>
                <button class="tip-refresh" onclick="refreshTip()">üîÑ Nouveau conseil</button>
            </div>
        </div>

        <footer role="contentinfo">
            Cree avec ‚ù§Ô∏è par <strong>Tino Le Doc</strong> | Propulse par <a href="https://claude.ai" target="_blank">Claude AI</a>
            <nav aria-label="Navigation principale">
            <div class="footer-links">
                <a href="quiz.html">üß† Quiz</a>
                <a href="sondages.html">üìä Sondages</a>
                <a href="debat.html">‚öîÔ∏è Debat</a>
                <a href="tchat.html">üí¨ Tchat</a>
                <a href="messagerie.html">‚úâÔ∏è Messagerie</a>
                <a href="avis.html">‚≠ê Avis</a>
                <a href="compte.html">üë§ Compte</a>
                <a href="premium.html">üëë Premium</a>
                <a href="boutique.html">üõí Boutique</a>
                <a href="appareils-connectes.html">üì° Appareils IA</a>
                <a href="contact.html">üìß Contact</a>
                <a href="confidentialite.html">üîí Confidentialite</a>
                <a href="veille-techno.html">üì° Veille Techno</a>
            </div>
            </nav>
        </footer>
    </div>

    <div id="toast" class="toast"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script>
        const db = firebaseDb;

        // ==================== AI KNOWLEDGE BASE ====================
        const aiKnowledge = {
            maison: {
                title: "Maison Intelligente",
                response: `<strong>La maison connectee</strong> est le domaine le plus mature de l'IoT ! Voici ce qu'il faut savoir :\n\n` +
                    `üîä <strong>Assistants vocaux</strong> : Alexa, Google Assistant et Siri sont les 3 leaders. Alexa domine avec +100 000 skills, Google excelle en comprehension naturelle.\n\n` +
                    `üå°Ô∏è <strong>Thermostats IA</strong> : Nest Learning, Netatmo et Tado apprennent vos habitudes et reduisent la facture de 15-25%.\n\n` +
                    `üí° <strong>Eclairage</strong> : Philips Hue, LIFX et Govee s'adaptent a votre rythme circadien grace a l'IA.\n\n` +
                    `ü§ñ <strong>Aspirateurs</strong> : Roomba j9+, Roborock S8 Pro Ultra utilisent la vision par IA pour eviter les obstacles.\n\n` +
                    `‚ö° <strong>Conseil</strong> : Commencez par un assistant vocal + des ampoules connectees. C'est le duo parfait pour debuter !`
            },
            sante: {
                title: "Sante Connectee",
                response: `<strong>La sante connectee avec IA</strong> revolutionne le suivi medical :\n\n` +
                    `‚åö <strong>Apple Watch / Galaxy Watch</strong> : Detection de chutes, ECG, SpO2, suivi du sommeil. L'IA detecte les arythmies cardiaques.\n\n` +
                    `üìä <strong>Oura Ring / Whoop</strong> : Analyse du sommeil en profondeur et scoring de recuperation par IA.\n\n` +
                    `ü©∫ <strong>Withings</strong> : Balance, tensiometre et thermometre connectes avec suivi longitudinal par IA.\n\n` +
                    `üß† <strong>IA predictive</strong> : Les algorithmes detectent des tendances invisibles a l'oeil nu (risques cardiaques, apnee du sommeil).\n\n` +
                    `‚ö†Ô∏è <strong>Attention</strong> : Ces appareils ne remplacent pas un medecin ! Ils sont un complement precieux mais pas un diagnostic.`
            },
            securite: {
                title: "Securite & Surveillance",
                response: `<strong>La securite connectee avec IA</strong> est en pleine evolution :\n\n` +
                    `üìπ <strong>Cameras IA</strong> : Ring, Nest Cam et Arlo distinguent personnes, animaux et vehicules. Fini les fausses alertes !\n\n` +
                    `üîê <strong>Serrures intelligentes</strong> : Nuki, Yale et August offrent acces par empreinte, code ou smartphone.\n\n` +
                    `üö® <strong>Alarmes IA</strong> : Ajax, Verisure et Somfy detectent les intrusions avec analyse comportementale.\n\n` +
                    `üîç <strong>Detection IA</strong> : Reconnaissance faciale, detection de colis, zones personnalisees... l'IA fait le tri.\n\n` +
                    `üõ°Ô∏è <strong>Vie privee</strong> : Privilegiez les marques avec traitement local (pas cloud) pour vos donnees sensibles. Verifiez les certifications RGPD.`
            },
            mobilite: {
                title: "Mobilite & Transport",
                response: `<strong>La mobilite connectee et l'IA</strong> transforment nos deplacements :\n\n` +
                    `üöó <strong>Conduite assistee</strong> : Tesla Autopilot, Ford BlueCruise, Mercedes Drive Pilot utilisent l'IA pour la conduite semi-autonome (Niveau 2-3).\n\n` +
                    `üìç <strong>Navigation IA</strong> : Waze et Google Maps predisent le trafic en temps reel grace au machine learning.\n\n` +
                    `üìπ <strong>Dashcams IA</strong> : Nexar et Viofo detectent les accidents et comportements dangereux automatiquement.\n\n` +
                    `üõ¥ <strong>Micromobilite</strong> : Trottinettes et velos connectes avec GPS, antivol et suivi de trajets.\n\n` +
                    `üîÆ <strong>Futur</strong> : La conduite 100% autonome (Niveau 5) est encore loin. L'IA actuelle est un copilote, pas un chauffeur !`
            },
            wearable: {
                title: "Wearables",
                response: `<strong>Les wearables IA</strong> sont au plus pres de votre corps :\n\n` +
                    `‚åö <strong>Montres</strong> : Apple Watch Ultra 2, Samsung Galaxy Watch 6, Garmin Fenix 8 - sport, sante et notifications au poignet.\n\n` +
                    `üï∂Ô∏è <strong>Lunettes AR</strong> : Meta Ray-Ban embarquent l'IA multimodale. Demandez "qu'est-ce que je vois ?" et l'IA repond !\n\n` +
                    `üéß <strong>Ecouteurs IA</strong> : AirPods Pro 2 avec audio adaptatif, reduction de bruit IA. Galaxy Buds avec traduction en temps reel.\n\n` +
                    `üíç <strong>Bagues</strong> : Oura Ring 4 et Samsung Galaxy Ring pour le suivi discret de la sante.\n\n` +
                    `üöÄ <strong>Tendance 2025</strong> : Les wearables deviennent proactifs - ils vous alertent AVANT que vous ne vous sentiez mal.`
            },
            cuisine: {
                title: "Cuisine Connectee",
                response: `<strong>La cuisine connectee avec IA</strong> revolutionne la gastronomie :\n\n` +
                    `üç≥ <strong>Thermomix TM6</strong> : Recettes guidees pas-a-pas, cuisson precise. La reference en robot culinaire connecte.\n\n` +
                    `‚ùÑÔ∏è <strong>Frigos IA</strong> : Samsung Family Hub et LG InstaView scannent vos aliments et suggerent des recettes anti-gaspillage.\n\n` +
                    `‚òï <strong>Cafetieres</strong> : Jura et De'Longhi apprennent vos preferences et preparent votre cafe a l'heure habituelle.\n\n` +
                    `üî• <strong>Fours IA</strong> : June Oven et Samsung Bespoke reconnaissent les aliments et ajustent la cuisson automatiquement.\n\n` +
                    `üí° <strong>Astuce</strong> : Un frigo IA peut reduire le gaspillage alimentaire de 30% en gerant les dates de peremption !`
            }
        };

        // ==================== GENERAL AI RESPONSES ====================
        const aiResponses = {
            "assistant vocal": "Les 3 grands assistants vocaux en 2025 :\n\nüîµ <strong>Alexa (Amazon)</strong> : Le plus compatible (+100K skills), ideal pour la domotique. Points forts : routines, appels, shopping.\n\nüî¥ <strong>Google Assistant</strong> : Le plus intelligent en comprehension naturelle. Excellente integration avec YouTube, Maps, Gmail.\n\n‚ö™ <strong>Siri (Apple)</strong> : Le plus respectueux de la vie privee. Parfait si vous etes 100% Apple. Progresse vite avec Apple Intelligence.\n\n<strong>Mon conseil</strong> : Si vous debutez, Google Nest Mini (rapport qualite/prix imbattable) ou Echo Dot.",

            "securise": "La securite IoT est un enjeu majeur :\n\nüîí <strong>Risques principaux</strong> : mots de passe par defaut, firmware non mis a jour, donnees non chiffrees, cameras piratables.\n\nüõ°Ô∏è <strong>Bonnes pratiques</strong> :\n1. Changez TOUJOURS les mots de passe par defaut\n2. Activez les mises a jour automatiques\n3. Utilisez un reseau Wi-Fi separe pour vos objets IoT\n4. Privilegiez les marques connues avec un suivi securite\n5. Desactivez les fonctions inutilisees\n\n‚ö†Ô∏è <strong>Alerte</strong> : En 2024, 57% des appareils IoT avaient au moins une vulnerabilite critique. Restez vigilants !",

            "demarrer": "Guide pour demarrer une maison connectee :\n\n<strong>Etape 1 - L'assistant vocal</strong> (50-100‚Ç¨)\nGoogle Nest Mini ou Echo Dot. C'est le cerveau de votre maison.\n\n<strong>Etape 2 - L'eclairage</strong> (60-120‚Ç¨)\nKit Philips Hue ou ampoules Govee. Commande vocale + ambiances.\n\n<strong>Etape 3 - Les prises</strong> (15-30‚Ç¨)\nPrises connectees TP-Link Tapo. Rendez vos vieux appareils 'intelligents'.\n\n<strong>Etape 4 - Le thermostat</strong> (150-250‚Ç¨)\nNetatmo ou Tado. Economies d'energie garanties.\n\n<strong>Etape 5 - La securite</strong> (100-300‚Ç¨)\nCamera + detecteur. Ring ou Arlo pour debuter.\n\nüí∞ <strong>Budget total debutant</strong> : 200-500‚Ç¨ pour une maison connectee fonctionnelle.",

            "risque": "Les risques de l'IA dans nos appareils :\n\n‚ö†Ô∏è <strong>Vie privee</strong> : Les assistants vocaux ecoutent en permanence. Amazon a admis que des employes ecoutaient certains enregistrements Alexa.\n\nüîì <strong>Securite</strong> : Plus d'appareils = plus de points d'entree pour les hackers. Les cameras et serrures connectees sont des cibles privilegiees.\n\nüß† <strong>Dependance</strong> : Si le cloud tombe, vos appareils deviennent inutiles. Privilegiez les appareils avec mode local.\n\nüìä <strong>Donnees</strong> : Vos habitudes, votre sante, vos conversations... tout est collecte et souvent revendu.\n\nüí° <strong>Solution</strong> : Choisissez des marques transparentes, lisez les politiques de confidentialite, et gardez un controle manuel en backup.",

            "default": "Bonne question ! Voici ce que je peux vous dire :\n\nLes appareils connectes avec IA evoluent tres vite. Les principales tendances 2025 sont :\n\nüì± <strong>IA embarquee</strong> : Le traitement se fait sur l'appareil, pas dans le cloud (plus rapide, plus prive).\n\nüè† <strong>Matter/Thread</strong> : Le nouveau standard universel qui fait enfin communiquer tous les appareils entre eux.\n\nüß† <strong>IA generative</strong> : Les assistants deviennent conversationnels (Alexa+, Google Gemini) et comprennent le contexte.\n\nüîã <strong>Energie</strong> : Capteurs auto-alimentes et appareils ultra-basse consommation.\n\nN'hesitez pas a me poser une question plus precise sur un type d'appareil !"
        };

        // ==================== DEVICE COMPARISON DATA ====================
        const deviceData = {
            alexa: { name: "Amazon Echo (Alexa)", ia: 82, eco: 78, prix: 90, securite: 72, compat: 95, son: 75, desc: "L'enceinte la plus compatible avec un ecosysteme massif de skills." },
            google_home: { name: "Google Nest Hub", ia: 90, eco: 80, prix: 85, securite: 78, compat: 88, son: 70, desc: "La meilleure comprehension du langage naturel et ecran tactile integre." },
            homepod: { name: "Apple HomePod", ia: 75, eco: 65, prix: 55, securite: 92, compat: 60, son: 95, desc: "Le meilleur son et la meilleure protection de la vie privee." },
            apple_watch: { name: "Apple Watch", ia: 85, eco: 70, prix: 50, securite: 90, compat: 65, sante: 92, desc: "La reference en montre connectee sante avec ECG et detection de chutes." },
            galaxy_watch: { name: "Galaxy Watch", ia: 80, eco: 78, prix: 72, securite: 82, compat: 80, sante: 85, desc: "Excellente alternative Android avec BIA et suivi de tension arterielle." },
            ring: { name: "Ring Doorbell", ia: 78, eco: 70, prix: 75, securite: 85, compat: 82, detect: 80, desc: "Sonnette video avec detection de mouvements IA et integration Alexa." },
            nest_cam: { name: "Google Nest Cam", ia: 88, eco: 75, prix: 70, securite: 80, compat: 85, detect: 90, desc: "Camera avec reconnaissance faciale IA et distinction personne/animal/vehicule." },
            roomba: { name: "iRobot Roomba", ia: 85, eco: 72, prix: 45, securite: 75, compat: 80, nettoyage: 92, desc: "L'aspirateur robot le plus intelligent avec cartographie et evitement d'obstacles." },
            dyson: { name: "Dyson Purifier", ia: 78, eco: 82, prix: 35, securite: 80, compat: 70, qualite_air: 95, desc: "Purificateur d'air premium avec capteurs de qualite et filtration HEPA IA." },
            thermomix: { name: "Thermomix TM6", ia: 72, eco: 68, prix: 30, securite: 78, compat: 50, cuisine: 98, desc: "Robot culinaire connecte avec des milliers de recettes guidees." },
            tesla: { name: "Tesla (Autopilot)", ia: 95, eco: 90, prix: 15, securite: 88, compat: 60, conduite: 90, desc: "La voiture la plus avancee en conduite assistee par IA avec mises a jour OTA." },
            meta_quest: { name: "Meta Quest", ia: 88, eco: 75, prix: 65, securite: 65, compat: 70, immersion: 92, desc: "Casque VR/MR autonome avec suivi des mains et passthrough IA." }
        };

        // ==================== TIPS DATABASE ====================
        const tips = [
            "Creez un <strong>reseau Wi-Fi dedie</strong> uniquement pour vos objets connectes. Cela isole vos appareils IoT de vos ordinateurs et smartphones, limitant la surface d'attaque en cas de piratage.",
            "Activez la <strong>double authentification</strong> sur tous vos comptes lies a vos appareils connectes (Google Home, Alexa, Ring...). C'est la protection numero 1 contre le piratage.",
            "Les <strong>ampoules connectees</strong> avec mode circadien ajustent automatiquement la temperature de couleur selon l'heure : lumiere bleue le matin pour se reveiller, chaude le soir pour favoriser le sommeil.",
            "Le standard <strong>Matter</strong> est l'avenir de la domotique. Avant d'acheter un nouvel appareil, verifiez qu'il est compatible Matter pour garantir l'interoperabilite a long terme.",
            "Placez votre <strong>routeur Wi-Fi au centre</strong> de votre maison et en hauteur. Les objets connectes sont souvent dans chaque piece et ont besoin d'un signal stable partout.",
            "Un <strong>thermostat connecte IA</strong> comme Nest ou Tado peut reduire votre facture de chauffage de 15 a 25%. L'investissement est rentabilise en moins d'un an.",
            "Pensez a <strong>mettre a jour le firmware</strong> de TOUS vos appareils connectes regulierement. Les mises a jour corrigent des failles de securite critiques.",
            "<strong>Desactivez le micro</strong> de votre assistant vocal quand vous ne l'utilisez pas. Tous les modeles ont un bouton physique de coupure du micro.",
            "Utilisez des <strong>prises connectees</strong> (15‚Ç¨ piece) pour rendre 'intelligents' vos appareils existants : cafetiere, lampe, ventilateur... sans tout racheter !",
            "Avant d'acheter une camera connectee, verifiez si elle offre un <strong>stockage local</strong> (carte SD) en plus du cloud. En cas de coupure internet, vous gardez vos enregistrements.",
            "Les <strong>routines automatisees</strong> sont la cle d'une maison vraiment intelligente. Exemple : a 22h, eteindre les lumieres, verrouiller la porte, baisser le chauffage, activer l'alarme.",
            "Les <strong>ecouteurs avec IA</strong> (AirPods Pro 2, Galaxy Buds) adaptent la reduction de bruit a votre environnement en temps reel. Parfait pour le bureau ou les transports.",
            "Un <strong>aspirateur robot avec camera IA</strong> evite les obstacles (chaussettes, cables, jouets). Les modeles sans IA se bloquent souvent et finissent par abimer vos affaires.",
            "Pour la <strong>sante connectee</strong>, privilegiez les montres certifiees medicalement (Apple Watch pour l'ECG, Withings pour le tensiometre). Les gadgets pas chers donnent des donnees peu fiables.",
            "L'<strong>IA generative</strong> arrive dans les assistants vocaux. Alexa+ et Google Gemini permettent des conversations naturelles multi-tours au lieu de simples commandes."
        ];

        // ==================== CHAT FUNCTIONS ====================
        function scrollToBottom() {
            const messages = document.getElementById('chatMessages');
            messages.scrollTop = messages.scrollHeight;
        }

        function addMessage(text, isUser) {
            const messages = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = 'chat-msg ' + (isUser ? 'user' : 'ai');
            msg.innerHTML = `<span class="msg-label">${isUser ? 'üë§ Vous' : 'ü§ñ Tino IA'}</span>${text}`;
            messages.appendChild(msg);
            scrollToBottom();
        }

        function showTyping() {
            const messages = document.getElementById('chatMessages');
            const typing = document.createElement('div');
            typing.className = 'typing-indicator';
            typing.id = 'typingIndicator';
            typing.innerHTML = '<span></span><span></span><span></span>';
            messages.appendChild(typing);
            scrollToBottom();
        }

        function hideTyping() {
            const el = document.getElementById('typingIndicator');
            if (el) el.remove();
        }

        function getAIResponse(question) {
            const q = question.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            // Check device categories
            for (const [key, data] of Object.entries(aiKnowledge)) {
                if (q.includes(key) || q.includes(data.title.toLowerCase())) {
                    return data.response;
                }
            }

            // Check specific patterns
            if (q.includes('assistant vocal') || q.includes('alexa') || q.includes('google home') || q.includes('siri') || q.includes('enceinte')) {
                return aiResponses['assistant vocal'];
            }
            if (q.includes('securise') || q.includes('securite') || q.includes('pirat') || q.includes('hack') || q.includes('proteg')) {
                return aiResponses['securise'];
            }
            if (q.includes('demarrer') || q.includes('commencer') || q.includes('debuter') || q.includes('debut') || q.includes('premier')) {
                return aiResponses['demarrer'];
            }
            if (q.includes('risque') || q.includes('danger') || q.includes('peur') || q.includes('vie privee') || q.includes('confidentialite') || q.includes('espion')) {
                return aiResponses['risque'];
            }

            // Specific device questions
            if (q.includes('roomba') || q.includes('aspirateur')) {
                return aiKnowledge.maison.response;
            }
            if (q.includes('montre') || q.includes('watch') || q.includes('bague') || q.includes('lunettes')) {
                return aiKnowledge.wearable.response;
            }
            if (q.includes('camera') || q.includes('alarme') || q.includes('serrure') || q.includes('ring')) {
                return aiKnowledge.securite.response;
            }
            if (q.includes('voiture') || q.includes('tesla') || q.includes('conduite') || q.includes('gps') || q.includes('trottinette')) {
                return aiKnowledge.mobilite.response;
            }
            if (q.includes('frigo') || q.includes('four') || q.includes('cafe') || q.includes('thermomix') || q.includes('cuisine') || q.includes('recette')) {
                return aiKnowledge.cuisine.response;
            }
            if (q.includes('sante') || q.includes('medical') || q.includes('ecg') || q.includes('coeur') || q.includes('sommeil') || q.includes('sport')) {
                return aiKnowledge.sante.response;
            }

            // Budget / price
            if (q.includes('prix') || q.includes('budget') || q.includes('cout') || q.includes('cher') || q.includes('pas cher') || q.includes('economique')) {
                return "Voici les budgets types pour les appareils connectes :\n\nüí∞ <strong>Petit budget (< 100‚Ç¨)</strong> : Ampoules Govee (30‚Ç¨), Echo Dot (40‚Ç¨), prises Tapo (15‚Ç¨), camera Tapo (35‚Ç¨)\n\nüí≥ <strong>Budget moyen (100-300‚Ç¨)</strong> : Thermostat Netatmo (180‚Ç¨), Roomba Combo (250‚Ç¨), Ring Doorbell (100‚Ç¨)\n\nüíé <strong>Premium (300‚Ç¨+)</strong> : Apple Watch Ultra (900‚Ç¨), Dyson Purifier (600‚Ç¨), Thermomix TM6 (1400‚Ç¨)\n\n<strong>Astuce</strong> : Attendez le Black Friday et le Prime Day pour les meilleures offres sur les appareils connectes. Les reductions atteignent souvent 30-50% !";
            }

            // Matter / standard
            if (q.includes('matter') || q.includes('thread') || q.includes('zigbee') || q.includes('z-wave') || q.includes('protocole') || q.includes('standard')) {
                return "Les protocoles de communication IoT :\n\nüåê <strong>Matter</strong> (2022+) : LE nouveau standard universel soutenu par Apple, Google, Amazon et Samsung. Un seul appareil fonctionne avec TOUS les ecosystemes.\n\nüßµ <strong>Thread</strong> : Protocole reseau mesh ultra-rapide utilise par Matter. Pas de hub requis, consommation minimale.\n\nüêù <strong>Zigbee</strong> : Fiable et eprouve depuis 15 ans. Compatible Matter via des ponts. Philips Hue, IKEA Dirigera.\n\nüì° <strong>Z-Wave</strong> : Tres stable, portee de 100m. Populaire en domotique avancee.\n\nüì∂ <strong>Wi-Fi</strong> : Le plus simple mais consomme plus de batterie.\n\n<strong>Conseil</strong> : En 2025, privilegiez les appareils compatibles Matter pour etre tranquille a long terme.";
            }

            return aiResponses['default'];
        }

        async function handleChat(e) {
            e.preventDefault();
            const input = document.getElementById('chatInput');
            const text = input.value.trim();
            if (!text) return;

            // Moderation
            const modResult = ModerationSystem.checkContent(text);
            if (!modResult.isValid) {
                showToast(modResult.message, true);
                return;
            }

            input.value = '';
            addMessage(escapeHtml(text), true);

            // Disable input while "thinking"
            const btn = document.getElementById('chatSendBtn');
            btn.disabled = true;
            input.disabled = true;

            showTyping();

            // Increment question counter
            db.ref('counters/iotQuestions').transaction(n => (n || 0) + 1);

            // Simulate AI thinking time
            const delay = 800 + Math.random() * 1200;
            setTimeout(() => {
                hideTyping();
                addMessage(getAIResponse(text), false);
                btn.disabled = false;
                input.disabled = false;
                input.focus();
            }, delay);
        }

        function askQuick(question) {
            document.getElementById('chatInput').value = question;
            handleChat(new Event('submit'));
        }

        function askAboutDevice(category) {
            // Highlight clicked card
            document.querySelectorAll('.device-card').forEach(c => c.classList.remove('active'));
            event.currentTarget.classList.add('active');

            const data = aiKnowledge[category];
            if (data) {
                addMessage("Parle-moi des " + data.title.toLowerCase(), true);
                showTyping();
                db.ref('counters/iotQuestions').transaction(n => (n || 0) + 1);
                setTimeout(() => {
                    hideTyping();
                    addMessage(data.response, false);
                }, 600 + Math.random() * 800);
            }
        }

        // ==================== COMPARATOR ====================
        function compareDevices() {
            const d1Key = document.getElementById('device1').value;
            const d2Key = document.getElementById('device2').value;
            const resultDiv = document.getElementById('compareResult');

            if (!d1Key || !d2Key) {
                showToast('Selectionnez deux appareils a comparer !', true);
                return;
            }

            if (d1Key === d2Key) {
                showToast('Choisissez deux appareils differents !', true);
                return;
            }

            const d1 = deviceData[d1Key];
            const d2 = deviceData[d2Key];

            const categories = [
                { key: 'ia', label: 'Intelligence IA', color: 'var(--cyan)' },
                { key: 'securite', label: 'Securite / Vie privee', color: 'var(--green)' },
                { key: 'compat', label: 'Compatibilite', color: 'var(--magenta)' },
                { key: 'eco', label: 'Ecosysteme', color: 'var(--orange)' },
                { key: 'prix', label: 'Rapport qualite/prix', color: 'var(--yellow)' }
            ];

            let barsHtml = '';
            let d1Total = 0, d2Total = 0;

            for (const cat of categories) {
                const v1 = d1[cat.key] || 70;
                const v2 = d2[cat.key] || 70;
                d1Total += v1;
                d2Total += v2;

                barsHtml += `
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 6px; font-weight: 600;">${cat.label}</div>
                        <div class="score-bar">
                            <span class="score-bar-label" style="color: var(--cyan);">${d1.name.split(' ')[0]}</span>
                            <div class="score-bar-track">
                                <div class="score-bar-fill" style="width: ${v1}%; background: ${cat.color};"></div>
                            </div>
                            <span class="score-bar-value" style="color: ${cat.color};">${v1}/100</span>
                        </div>
                        <div class="score-bar">
                            <span class="score-bar-label" style="color: var(--magenta);">${d2.name.split(' ')[0]}</span>
                            <div class="score-bar-track">
                                <div class="score-bar-fill" style="width: ${v2}%; background: ${cat.color}; opacity: 0.6;"></div>
                            </div>
                            <span class="score-bar-value" style="color: ${cat.color}; opacity: 0.7;">${v2}/100</span>
                        </div>
                    </div>
                `;
            }

            const avg1 = Math.round(d1Total / categories.length);
            const avg2 = Math.round(d2Total / categories.length);
            const winner = avg1 > avg2 ? d1 : (avg2 > avg1 ? d2 : null);

            let verdictHtml = '';
            if (winner) {
                const winnerName = winner === d1 ? d1.name : d2.name;
                verdictHtml = `<div style="margin-top: 20px; padding: 15px; background: rgba(0, 255, 136, 0.08); border: 1px solid rgba(0, 255, 136, 0.2); border-radius: 12px;">
                    <strong style="color: var(--green);">üèÜ Verdict IA :</strong> <strong>${escapeHtml(winnerName)}</strong> l'emporte avec un score moyen de ${Math.max(avg1, avg2)}/100 contre ${Math.min(avg1, avg2)}/100.
                    <br><br><span style="color: var(--text-secondary); font-size: 0.85rem;">${escapeHtml(winner.desc)}</span>
                </div>`;
            } else {
                verdictHtml = `<div style="margin-top: 20px; padding: 15px; background: rgba(245, 255, 0, 0.08); border: 1px solid rgba(245, 255, 0, 0.2); border-radius: 12px;">
                    <strong style="color: var(--yellow);">ü§ù Verdict IA :</strong> Egalite parfaite ! Les deux appareils ont un score de ${avg1}/100. Le choix depend de vos priorites.
                </div>`;
            }

            resultDiv.innerHTML = `
                <h4>ü§ñ Analyse IA : ${escapeHtml(d1.name)} vs ${escapeHtml(d2.name)}</h4>
                <p style="margin-bottom: 20px; color: var(--text-secondary);">${escapeHtml(d1.desc)}<br><br>${escapeHtml(d2.desc)}</p>
                ${barsHtml}
                ${verdictHtml}
            `;
            resultDiv.classList.add('visible');

            // Animate bars
            setTimeout(() => {
                resultDiv.querySelectorAll('.score-bar-fill').forEach(bar => {
                    bar.style.width = bar.style.width;
                });
            }, 50);
        }

        // ==================== TIP OF THE DAY ====================
        function refreshTip() {
            const tipEl = document.getElementById('tipText');
            const randomIndex = Math.floor(Math.random() * tips.length);
            tipEl.style.opacity = '0';
            setTimeout(() => {
                tipEl.innerHTML = tips[randomIndex];
                tipEl.style.opacity = '1';
                tipEl.style.transition = 'opacity 0.4s';
            }, 200);
        }

        // ==================== FIREBASE COUNTERS ====================
        function loadCounters() {
            db.ref('counters/iotQuestions').on('value', snapshot => {
                const count = snapshot.val() || 0;
                document.getElementById('statQuestions').textContent = count.toLocaleString('fr-FR');
            });
        }

        // ==================== INIT ====================
        refreshTip();
        loadCounters();
        console.log('üì° Page Appareils Connectes & IA initialisee');
    </script>
</body>
</html>
